<div class="max-w-4xl mx-auto p-6">
    <h2 class="text-2xl font-bold text-gray-800 mb-6">Shopping Cart</h2>

    @if (cartService.count() > 0) {
        <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
            <table class="min-w-full divide-y divide-gray-200">
                <thead class="bg-gray-50">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Product</th>
                        <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Price</th>
                        <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Action</th>
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-200">
                    @for (item of cartService.cartItems(); track $index) {
                    <tr>
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                            {{ item.ProductName }}
                            <div class="text-xs text-gray-500 font-normal">{{ item.ProductCode }}</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900">
                            ฿{{ item.UnitPrice | number:'1.2-2' }}
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-center text-sm">
                            <button (click)="removeItem($index)" 
                                    class="text-red-600 hover:text-red-900 font-medium hover:underline cursor-pointer">
                                Remove
                            </button>
                        </td>
                    </tr>
                    }
                </tbody>
                <tfoot class="bg-gray-50">
                    <tr>
                        <td class="px-6 py-4 text-base font-bold text-gray-900">Total</td>
                        <td class="px-6 py-4 text-right text-base font-bold text-blue-600">
                            ฿{{ cartService.totalPrice() | number:'1.2-2' }}
                        </td>
                        <td></td>
                    </tr>
                </tfoot>
            </table>
        </div>

        <div class="mt-6 flex justify-end">
            <button (click)="onCheckout()"
                    class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-bold shadow-md transition-all transform hover:-translate-y-0.5 cursor-pointer">
                Checkout Now
            </button>
        </div>
    } @else {
        <div class="text-center py-12 bg-white rounded-xl border border-gray-200 shadow-sm">
            <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
            </svg>
            <h3 class="mt-2 text-sm font-medium text-gray-900">No items</h3>
            <p class="mt-1 text-sm text-gray-500">Get started by adding some products to your cart.</p>
            <div class="mt-6">
                <a href="marketdashboard" class="text-blue-600 hover:text-blue-500 font-medium">
                    Continue Shopping &rarr;
                </a>
            </div>
        </div>
    }
</div>